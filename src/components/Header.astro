---
import HeaderLogo from "./shared/HeaderLogo.astro";
import NavLinks from "./shared/NavLinks.astro";
import SocialLinks from "./shared/SocialLinks.astro";
import ThemeButton from "./shared/ThemeButton.astro";
import LanguageSwitcher from "./shared/LanguageSwitcher.astro";
import MobileMenu from "./shared/MobileMenu.astro";
import BurgerButton from "./shared/BurgerButton.astro";
import Search from "astro-pagefind/components/Search";

const { navLinks } = Astro.props;
---

<header
  class="pl-1 pr-3 text-[var(--d-bg)] dark:text-[var(--l-bg)] sticky top-0 md:top-3 z-20 rounded-none lg:rounded-4xl bg-opacity-60 backdrop-filter backdrop-blur-[20px]"
>
  <nav class="flex justify-between items-center">
    <HeaderLogo />

    <div class="flex items-center gap-10">
      <NavLinks navLinks={navLinks} class="mr-5" />

      <div class="flex items-center gap-5">
        <SocialLinks />

        <div class="flex items-center gap-2">
          <LanguageSwitcher />
          <ThemeButton />
          <BurgerButton />
        </div>
      </div>
    </div>
  </nav>
</header>

<MobileMenu navLinks={navLinks} />

<Search id="search" className="pagefind-ui" uiOptions={{ showImages: true }} />

<script>
  window.addEventListener("load", () => {
    const searchElement = document.querySelector(".pagefind-ui--reset");

    window.addEventListener("scroll", () => {
      if (window.scrollY >= 100) {
        searchElement.classList.add("hide");
      } else {
        searchElement.classList.remove("hide");
      }
    });
  });
</script>
